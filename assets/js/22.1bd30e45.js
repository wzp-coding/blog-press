(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{466:function(t,a,_){"use strict";_.r(a);var v=_(15),s=Object(v.a)({},(function(){var t=this,a=t.$createElement,_=t._self._c||a;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"组件库相关知识"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#组件库相关知识"}},[t._v("#")]),t._v(" 组件库相关知识")]),t._v(" "),_("p"),_("div",{staticClass:"table-of-contents"},[_("ul",[_("li",[_("a",{attrs:{href:"#组件库支持图片构建"}},[t._v("组件库支持图片构建")]),_("ul",[_("li",[_("a",{attrs:{href:"#背景"}},[t._v("背景")])]),_("li",[_("a",{attrs:{href:"#解决方案"}},[t._v("解决方案")]),_("ul",[_("li",[_("a",{attrs:{href:"#方案一"}},[t._v("方案一")])]),_("li",[_("a",{attrs:{href:"#方案二"}},[t._v("方案二")])]),_("li",[_("a",{attrs:{href:"#方案三"}},[t._v("方案三")])])])])])]),_("li",[_("a",{attrs:{href:"#参考"}},[t._v("参考")])])])]),_("p"),t._v(" "),_("h2",{attrs:{id:"组件库支持图片构建"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#组件库支持图片构建"}},[t._v("#")]),t._v(" 组件库支持图片构建")]),t._v(" "),_("h3",{attrs:{id:"背景"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),_("p",[t._v("作为一个业务组件库，组件用到图片的可能性较大，例如默认背景图、logo 等。")]),t._v(" "),_("p",[t._v("最近在开发分享海报（sharePoster）组件的时候，就需要用到一些默认图片。开发的时候一般看的都是文档（storybook），是由 webpack 打包的，默认会处理静态资源，看起来没什么问题。")]),t._v(" "),_("p",[t._v("但是在发布的时候，我们并没有对静态资源的处理，而是保留了图片，构建后的代码也是保留了对图片的引用。")]),t._v(" "),_("p",[t._v("到了业务项目里面就有可能出问题了，我们项目对静态资源的处理很可能是不包含 node_modules 的，这时候就没有 loader 处理组件库对图片的引用了。")]),t._v(" "),_("h3",{attrs:{id:"解决方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),_("h4",{attrs:{id:"方案一"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#方案一"}},[t._v("#")]),t._v(" 方案一")]),t._v(" "),_("p",[t._v("业务项目中，增加对 school-web-ui 组件库静态资源引用的配置。")]),t._v(" "),_("p",[t._v("优点：成本最小。")]),t._v(" "),_("p",[t._v("缺点：")]),t._v(" "),_("ul",[_("li",[t._v("需要每个业务都对组件库的静态资源引用进行配置，感觉比较繁琐，")]),t._v(" "),_("li",[t._v("不清楚配置的情况下，遇到报错还得排查，浪费时间。")])]),t._v(" "),_("h4",{attrs:{id:"方案二"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#方案二"}},[t._v("#")]),t._v(" 方案二")]),t._v(" "),_("p",[t._v("组件库引用图片的时候，全部先上传 cdn，引用 cdn 的地址。")]),t._v(" "),_("p",[t._v("优点：")]),t._v(" "),_("ul",[_("li",[t._v("业务无感。")]),t._v(" "),_("li",[t._v("减少组件库体积（图片还是比较占空间的）。")])]),t._v(" "),_("p",[t._v("缺点：")]),t._v(" "),_("ul",[_("li",[t._v("需要提前了解这个约定，如果不知道这个约定，开发的时候没问题，要等到发布后，业务使用的时候才可能出现 bug，有不确定性。")]),t._v(" "),_("li",[t._v("引用图片都需要上传，影响开发体验，重复上传还会浪费 cdn 资源。")]),t._v(" "),_("li",[t._v("cdn 的图片不允许跨站访问，开发环境是 localhost，还需要配置 nginx 跟 host。")])]),t._v(" "),_("h4",{attrs:{id:"方案三"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#方案三"}},[t._v("#")]),t._v(" 方案三")]),t._v(" "),_("p",[t._v("组件库增加对图片的构建。")]),t._v(" "),_("p",[t._v("构建流程：")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://blog-images-1302031947.cos.ap-guangzhou.myqcloud.com/images/Snipaste_2023-12-17_19-36-26.png",alt:"构建流程"}})]),t._v(" "),_("p",[t._v("上面由红色框框出来的部分就是组件库在构建的时候增加的流程。")]),t._v(" "),_("p",[t._v("优点：")]),t._v(" "),_("ul",[_("li",[t._v("组件库开发无感")]),t._v(" "),_("li",[t._v("业务无感")]),t._v(" "),_("li",[t._v("减少组件库体积（上传后的图片会被删除）")]),t._v(" "),_("li",[t._v("合理利用资源，文件 hash 作为唯一标识，重复引用的资源能得到复用。")])]),t._v(" "),_("p",[t._v("缺点：增加构建流程，构建时间变长。")]),t._v(" "),_("h2",{attrs:{id:"参考"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")])])}),[],!1,null,null,null);a.default=s.exports}}]);